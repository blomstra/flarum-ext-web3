{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@blomstra/web3/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@blomstra/web3/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@blomstra/web3/./node_modules/@babel/runtime/regenerator/index.js","webpack://@blomstra/web3/webpack/bootstrap","webpack://@blomstra/web3/webpack/runtime/compat get default export","webpack://@blomstra/web3/webpack/runtime/define property getters","webpack://@blomstra/web3/webpack/runtime/hasOwnProperty shorthand","webpack://@blomstra/web3/webpack/runtime/make namespace object","webpack://@blomstra/web3/external root \"flarum.core.compat['forum/app']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/extend']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['forum/components/LogInButtons']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['forum/components/SignUpModal']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@blomstra/web3/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@blomstra/web3/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@blomstra/web3/external root \"flarum.core.compat['common/Model']\"","webpack://@blomstra/web3/./src/forum/models/Web3Account.ts","webpack://@blomstra/web3/external root \"flarum.core.compat['forum/components/LogInButton']\"","webpack://@blomstra/web3/./src/forum/components/LogInButton.tsx","webpack://@blomstra/web3/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/components/Button']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/components/Link']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@blomstra/web3/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@blomstra/web3/external root \"flarum.core.compat['common/Component']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@blomstra/web3/./src/forum/components/WalletAccounts.tsx","webpack://@blomstra/web3/./src/forum/components/PolkadotConnectWalletModal.tsx","webpack://@blomstra/web3/./src/forum/utils/getProvider.ts","webpack://@blomstra/web3/./src/forum/components/EvmConnectWalletModal.tsx","webpack://@blomstra/web3/./src/forum/components/ConnectWalletModal.tsx","webpack://@blomstra/web3/./src/forum/components/SignUpModal.tsx","webpack://@blomstra/web3/./src/forum/components/LogInModal.tsx","webpack://@blomstra/web3/./src/forum/states/Web3AccountsState.ts","webpack://@blomstra/web3/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@blomstra/web3/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@blomstra/web3/./src/forum/components/AttachedWallets.tsx","webpack://@blomstra/web3/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://@blomstra/web3/./src/forum/states/Web3ModulesState.ts","webpack://@blomstra/web3/./src/forum/index.tsx"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n      return ContinueSentinel;\n    }\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) {\n              if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            }\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInButtons'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SignUpModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class Web3Account extends Model {\n  /** Hex String **/\n  address() {\n    return Model.attribute<string>('address').call(this);\n  }\n\n  source() {\n    return Model.attribute<string>('source').call(this);\n  }\n\n  type() {\n    return Model.attribute<'sr25519' | 'eth'>('type').call(this);\n  }\n\n  protected apiEndpoint(): string {\n    return super.apiEndpoint().replace('/web3-accounts', '/web3/accounts');\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInButton'];","import BaseLogInButton from 'flarum/forum/components/LogInButton';\n\nexport default class LogInButton extends BaseLogInButton {\n  static initAttrs(attrs: { className: string }) {\n    attrs.className = (attrs.className || '') + ' LogInButton';\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport app from 'flarum/forum/app';\nimport classList from 'flarum/common/utils/classList';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Web3Account from '../models/Web3Account';\nimport type { Wallet, WalletAccount } from '@subwallet/wallet-connect/types';\nimport type RequestError from 'flarum/common/utils/RequestError';\nimport type Mithril from 'mithril';\n\nexport interface IWalletAccountsAttrs extends ComponentAttrs {\n  username: string;\n  wallet: Wallet;\n  onback: () => void;\n  onattach?: (address: string, signature: string, source?: string, type?: string) => void;\n}\n\nexport default class WalletAccounts<CustomAttrs extends IWalletAccountsAttrs = IWalletAccountsAttrs> extends Component<CustomAttrs> {\n  private accounts: WalletAccount[] | null = null;\n  private loading = false;\n\n  view() {\n    if (this.accounts === null) {\n      this.attrs.wallet.getAccounts().then((accs) => {\n        this.accounts = accs || [];\n        m.redraw();\n      });\n\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className={classList('WalletAccounts', { 'WalletAccounts--loading': this.loading })}>\n        <div className=\"Form--centered\">\n          <Button className=\"Button Button--text Button--block WalletAccounts-goback\" icon=\"fas fa-arrow-left\" onclick={() => this.attrs.onback()}>\n            {app.translator.trans('blomstra-web3.forum.polkadot-connect-wallet-modal.goback')}\n          </Button>\n        </div>\n        <div className=\"WalletAccounts-selectedWallet\">\n          <div className=\"WalletAccounts-selectedWallet-title\">{this.attrs.wallet.title}</div>\n          <div className=\"WalletAccounts-selectedWallet-list\">\n            {this.accounts?.map((account, accountIndex) => this.accountView(account, accountIndex))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  accountView(account: WalletAccount, accountIndex: number) {\n    const { u8aToHex, decodeAddress } = app.web3.loadedModules();\n\n    const isAttached = app.web3accounts.exists(u8aToHex(decodeAddress(account.address)));\n\n    let bindMessage = 'blomstra-web3.forum.polkadot-connect-wallet-modal.';\n\n    switch (isAttached) {\n      case true:\n        bindMessage += 'unattach_address';\n        break;\n      case false:\n        if (app.session.user) bindMessage += 'attach_address';\n        // For Login/Signup processes.\n        else bindMessage += 'select';\n    }\n\n    return (\n      <div\n        key={accountIndex}\n        className={classList('WalletAccounts-account', {\n          'WalletAccounts-account--attached': isAttached,\n          'WalletAccounts-account--unattached': !isAttached,\n        })}\n      >\n        <div className=\"WalletAccounts-account-info\">\n          <div className=\"WalletAccounts-account-title\">{account.name}</div>\n          <div className=\"WalletAccounts-account-address\">{account.address}</div>\n        </div>\n        <div className=\"WalletAccounts-account-actions\">\n          <Tooltip text={app.translator.trans(bindMessage)}>\n            <Button\n              className={classList('Button Button--icon', { 'Button--primary': !isAttached, 'Button--danger': isAttached })}\n              icon={isAttached ? 'fas fa-unlink' : 'fas fa-plus'}\n              onclick={!isAttached ? this.connectAccount.bind(this, account) : this.disconnectAccount.bind(this, account.address)}\n            />\n          </Tooltip>\n        </div>\n      </div>\n    );\n  }\n\n  async connectAccount(account: WalletAccount) {\n    const wallet = account.wallet!;\n\n    if (!this.loading) {\n      this.loading = true;\n      m.redraw();\n    }\n\n    await wallet.enable();\n\n    if (wallet.signer) {\n      const { stringToHex, u8aToHex, decodeAddress } = await app.web3.all();\n\n      try {\n        const signer = wallet.signer;\n\n        // Trigger the extension popup\n        const { signature } = await signer.signRaw!({\n          type: 'bytes',\n          data: stringToHex(this.attrs.username),\n          address: account.address,\n        });\n\n        const hexAddress = u8aToHex(decodeAddress(account.address));\n        // @ts-ignore\n        const type = account.type;\n        const source = this.attrs.wallet.extensionName;\n\n        if (app.session.user) {\n          // Submit account to the backend\n          const savedAccount = await app.store.createRecord<Web3Account>('web3-accounts').save(\n            {\n              address: hexAddress,\n              source,\n              type,\n            },\n            {\n              errorHandler: this.onerror.bind(this),\n              meta: {\n                signature,\n              },\n            }\n          );\n\n          app.web3accounts.push(savedAccount);\n        }\n\n        if (this.attrs.onattach) this.attrs.onattach(hexAddress, signature, source, type);\n      } catch (err) {\n        app.alerts.show({ type: 'error' }, app.translator.trans('blomstra-web3.forum.connect-wallet-modal.could-not-sign'));\n      }\n\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  async disconnectAccount(address: string) {\n    const { u8aToHex, decodeAddress } = await app.web3.all();\n    address = u8aToHex(decodeAddress(address));\n    await app.store.getBy<Web3Account>('web3-accounts', 'address', address)?.delete();\n    app.web3accounts.remove(address);\n    m.redraw();\n  }\n\n  onerror(error: RequestError) {\n    if (error.status === 401) {\n      app.alerts.show({ type: 'error' }, app.translator.trans('blomstra-web3.forum.connect-wallet-modal.signature-invalid'));\n    } else {\n      throw error;\n    }\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\nimport Link from 'flarum/common/components/Link';\nimport { ComponentAttrs } from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport WalletAccounts from './WalletAccounts';\nimport type { IConnectWalletModalAttrs } from './ConnectWalletModal';\nimport type { Wallet } from '@subwallet/wallet-connect/types';\nimport type Mithril from 'mithril';\n\nexport interface WalletKind {\n  key: string;\n  title: string;\n  wallets: Wallet[];\n}\n\nexport interface IPolkadotConnectWalletModalAttrs extends IConnectWalletModalAttrs {}\n\nexport default class PolkadotConnectWalletModal<\n  CustomAttrs extends IPolkadotConnectWalletModalAttrs = IPolkadotConnectWalletModalAttrs\n> extends Modal<CustomAttrs> {\n  private selectedWallet: Wallet | null = null;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n  }\n\n  className() {\n    return 'PolkadotConnectWalletModal';\n  }\n\n  title() {\n    return app.translator.trans('blomstra-web3.forum.polkadot-connect-wallet-modal.title');\n  }\n\n  content() {\n    if (!app.web3.loaded) {\n      app.web3.load().then(() => m.redraw());\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">{this.selectedWallet ? this.selectedWalletView() : this.walletSelectionView()}</div>\n      </div>\n    );\n  }\n\n  walletSelectionView() {\n    return this.walletKindItems().toArray();\n  }\n\n  walletKindItems() {\n    const items = new ItemList<Mithril.Children>();\n\n    const { getDotsamaWallets } = app.web3.loadedModules();\n\n    const wallets: WalletKind = {\n      key: 'polkadot',\n      title: 'Polkadot',\n      wallets: getDotsamaWallets(),\n    };\n\n    items.add('polkadot', <div className=\"Form-group\">{this.walletKindView(wallets)}</div>);\n\n    return items;\n  }\n\n  walletKindView(walletKind: WalletKind, index: number = 0) {\n    return (\n      <div className=\"PolkadotConnectWalletModal-walletKind\" key={index}>\n        <div className=\"PolkadotConnectWalletModal-walletKind-title\">{walletKind.title}</div>\n        <div className=\"PolkadotConnectWalletModal-walletKind-list\">\n          {walletKind.wallets.map((wallet, walletIndex) => this.walletView(wallet, walletIndex))}\n        </div>\n      </div>\n    );\n  }\n\n  walletView(wallet: Wallet, walletIndex: number = 0) {\n    const Tag = wallet.installed ? Button : Link;\n    let attrs: ComponentAttrs;\n\n    if (!wallet.installed) {\n      attrs = {\n        href: wallet.installUrl,\n        target: '_blank',\n        rel: 'noopener noreferrer',\n      };\n    } else {\n      attrs = {\n        onclick: this.listWalletAccounts.bind(this, wallet),\n      };\n    }\n\n    return (\n      <Tag className=\"Button PolkadotConnectWalletModal-wallet\" key={walletIndex} {...attrs}>\n        <div className=\"PolkadotConnectWalletModal-wallet-logo\">\n          <img {...wallet.logo} alt=\"\" />\n        </div>\n        <div className=\"PolkadotConnectWalletModal-wallet-title\">{wallet.title}</div>\n        <div className=\"PolkadotConnectWalletModal-wallet-indicator\">{wallet.installed ? icon('fas fa-arrow-right') : icon('fas fa-download')}</div>\n      </Tag>\n    );\n  }\n\n  selectedWalletView() {\n    return (\n      <WalletAccounts\n        username={this.attrs.username}\n        wallet={this.selectedWallet}\n        onback={this.listWallets.bind(this)}\n        onattach={this.attrs.onattach}\n      />\n    );\n  }\n\n  listWallets() {\n    this.selectedWallet = null;\n  }\n\n  listWalletAccounts(wallet: Wallet) {\n    this.selectedWallet = wallet;\n  }\n}\n","import app from 'flarum/forum/app';\n\nexport default async function getProvider() {\n  const INFURA_ID = app.forum.attribute<string | undefined>('blomstra-web3.infura-project-id');\n\n  const { Web3Modal, CoinbaseWalletSDK, WalletConnectProvider } = await app.web3.all();\n\n  const providerOptions = {\n    walletconnect: {\n      package: WalletConnectProvider,\n      options: {\n        infuraId: INFURA_ID,\n      },\n    },\n    coinbasewallet: {\n      package: CoinbaseWalletSDK,\n      options: {\n        appName: 'My Awesome App',\n        infuraId: INFURA_ID,\n      },\n    },\n\n    binancechainwallet: {\n      package: true,\n    },\n    opera: {\n      package: true,\n    },\n  };\n\n  return new Web3Modal({\n    providerOptions,\n  });\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport { IConnectWalletModalAttrs } from './ConnectWalletModal';\nimport Web3Account from '../models/Web3Account';\nimport getProvider from '../utils/getProvider';\nimport type Core from 'web3modal';\nimport type Mithril from 'mithril';\n\n// import { W3mModal, W3mConnectButton } from '@web3modal/ui';\n// import { ClientCtrl, ConfigCtrl, ConfigOptions } from '@web3modal/core';\n// import { chains, providers } from '@web3modal/ethereum';\n\n// const projectId = '5bae682417f3958e125f25a0b67535e7';\n//\n// const config: ConfigOptions = {\n//   projectId,\n//   theme: 'dark',\n//   accentColor: 'default',\n//   ethereum: {\n//     appName: 'web3Modal',\n//     autoConnect: true,\n//     chains: [chains.mainnet, chains.rinkeby, chains.avalanche, chains.avalancheFuji, chains.polygon, chains.polygonMumbai],\n//     providers: [providers.walletConnectProvider({ projectId })],\n//   },\n// };\n\n// class Web3Modal extends Component {\n//   async oninit(vnode: Mithril.Vnode<any, this>) {\n//     super.oninit(vnode);\n//\n//     // ConfigCtrl.setConfig(config);\n//     // if (config.ethereum) await ClientCtrl.setEthereumClient(config.ethereum);\n//   }\n//\n//   view(): Mithril.Children {\n//     return <w3m-modal />;\n//   }\n// }\n\nexport interface IEvmConnectWalletModalAttrs extends IConnectWalletModalAttrs {}\n\nexport default class EvmConnectWalletModal<CustomAttrs extends IEvmConnectWalletModalAttrs = IEvmConnectWalletModalAttrs> extends Modal<CustomAttrs> {\n  private web3Modal!: Core;\n  private provider?: any;\n  private __providerName?: string;\n  private currentAddress?: string;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    app.web3accounts.load();\n  }\n\n  className(): string {\n    return 'EvmConnectWalletModal';\n  }\n\n  title(): Mithril.Children {\n    return app.translator.trans('blomstra-web3.forum.evm-connect-wallet-modal.title');\n  }\n\n  content() {\n    if (!this.currentAddress) {\n      this.getProvider()\n        .then(async (provider) => {\n          try {\n            this.currentAddress = (await provider.request({ method: 'eth_requestAccounts' }))[0];\n          } catch (error) {\n            app.modal.close();\n          }\n\n          m.redraw();\n        })\n        .catch(() => app.modal.close());\n\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form-group\">\n          <label>{this.currentAddress}</label>\n          {app.web3accounts.exists(this.currentAddress) ? (\n            <>\n              <Button className=\"Button\" onclick={() => this.disconnect(false)}>\n                {app.translator.trans('blomstra-web3.forum.evm-connect-wallet-modal.disconnect')}\n              </Button>\n              <Button className=\"Button\" onclick={() => this.disconnect(true)}>\n                {app.translator.trans('blomstra-web3.forum.evm-connect-wallet-modal.disconnect-and-unbind')}\n              </Button>\n            </>\n          ) : (\n            <Button className=\"Button\" onclick={this.bind.bind(this)}>\n              {app.translator.trans(\n                app.session.user ? 'blomstra-web3.forum.evm-connect-wallet-modal.bind' : 'blomstra-web3.forum.evm-connect-wallet-modal.select'\n              )}\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  async bind() {\n    const provider = this.provider;\n\n    try {\n      const signature = await provider.request({\n        method: 'personal_sign',\n        params: [this.attrs.username, this.currentAddress],\n      });\n\n      const { getProviderInfo } = await app.web3.all();\n\n      const type = 'eth';\n      // Special handling required for binance wallet as it doesn't identify itself with a check of `isBinanceWallet`\n      const source = this.__providerName === 'binancechainwallet' ? 'Binance Chain' : getProviderInfo(provider).name;\n\n      if (app.session.user) {\n        // Submit account to the backend\n        const savedAccount = await app.store.createRecord<Web3Account>('web3-accounts').save(\n          {\n            address: this.currentAddress,\n            source,\n            type,\n          },\n          {\n            errorHandler: this.onerror.bind(this),\n            meta: {\n              signature,\n            },\n          }\n        );\n\n        app.web3accounts.push(savedAccount);\n      }\n\n      if (this.attrs.onattach) this.attrs.onattach(this.currentAddress!, signature, source, type);\n    } catch (e) {\n      app.alerts.show({ type: 'error' }, app.translator.trans('blomstra-web3.forum.connect-wallet-modal.could-not-sign'));\n    }\n\n    this.loading = false;\n    m.redraw();\n  }\n\n  async disconnect(unbind: boolean) {\n    const provider = this.provider;\n\n    if (provider?.close) {\n      await provider.close();\n\n      await this.web3Modal.clearCachedProvider();\n    }\n\n    const address = this.currentAddress;\n\n    if (unbind) {\n      const { u8aToHex, decodeAddress } = await app.web3.all();\n      await app.web3accounts.remove(u8aToHex(decodeAddress(address)));\n    }\n\n    delete this.currentAddress;\n  }\n\n  async getProvider() {\n    if (!this.web3Modal) {\n      this.web3Modal = await getProvider();\n    }\n\n    this.web3Modal.on('select', (providerName: string) => {\n      this.__providerName = providerName;\n    });\n\n    const provider = await this.web3Modal.connect();\n\n    provider.on('accountsChanged', (accounts: string[]) => {\n      this.currentAddress = accounts[0];\n      m.redraw();\n    });\n\n    return (this.provider = provider);\n  }\n}\n","import type Mithril from 'mithril';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport app from 'flarum/forum/app';\nimport PolkadotConnectWalletModal from './PolkadotConnectWalletModal';\nimport EvmConnectWalletModal from './EvmConnectWalletModal';\n\nexport interface IConnectWalletModalAttrs extends IInternalModalAttrs {\n  username: string;\n  onattach?: (address: string, signature: string, source: string, type: string) => void;\n}\n\nexport default class ConnectWalletModal<CustomAttrs extends IConnectWalletModalAttrs = IConnectWalletModalAttrs> extends Modal<CustomAttrs> {\n  className(): string {\n    return 'ConnectWalletModal';\n  }\n\n  title(): Mithril.Children {\n    return app.translator.trans('blomstra-web3.forum.connect-wallet-modal.title');\n  }\n\n  content(): Mithril.Children {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Blomstra-Web3-Button--polkadot Button--block\"\n              onclick={() => app.modal.show(PolkadotConnectWalletModal, this.attrs as Record<string, any>, true)}\n            >\n              {app.translator.trans('blomstra-web3.forum.connect-wallet-modal.polkadot-wallets')}\n            </Button>\n            <Button\n              className=\"Button Blomstra-Web3-Button--evm Button--block\"\n              onclick={() => app.modal.show(EvmConnectWalletModal, this.attrs as Record<string, any>, true)}\n            >\n              {app.translator.trans('blomstra-web3.forum.connect-wallet-modal.evm-wallets')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport BaseSignUpModal from 'flarum/forum/components/SignUpModal';\nimport type ItemList from 'flarum/common/utils/ItemList';\nimport ConnectWalletModal from './ConnectWalletModal';\nimport Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\nimport LogInModal from './LogInModal';\n\nexport default class SignUpModal extends BaseSignUpModal {\n  title() {\n    return app.translator.trans('blomstra-web3.forum.sign-up.with-wallet');\n  }\n\n  content() {\n    return [\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">{this.fields().toArray()}</div>\n      </div>,\n      <div className=\"Modal-footer\">{this.footer()}</div>,\n    ];\n  }\n\n  fields(): ItemList<unknown> {\n    const items = super.fields();\n\n    items.remove('password');\n\n    items.setContent(\n      'submit',\n      <Button className=\"Button Button--block Button--primary\" type=\"submit\" disabled={!this.username() || !this.email()}>\n        {app.translator.trans('blomstra-web3.forum.sign-up.select-wallet-account', {\n          rightArrow: icon('fas fa-arrow-right'),\n        })}\n      </Button>\n    );\n\n    return items;\n  }\n\n  footer() {\n    return [\n      app.forum.attribute('allowSignUp') ? (\n        <p className=\"LogInModal-forgotPassword\">\n          <a onclick={() => app.modal.show(BaseSignUpModal)}>{app.translator.trans('blomstra-web3.forum.sign-up.basic-signup-link')}</a>\n        </p>\n      ) : (\n        <></>\n      ),\n\n      <p className=\"SignUpModal-logIn\">\n        {app.translator.trans('core.forum.sign_up.log_in_text', { a: <a onclick={() => app.modal.show(LogInModal)} /> })}\n      </p>,\n    ];\n  }\n\n  onsubmit(e: SubmitEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    app.modal.show(\n      ConnectWalletModal,\n      {\n        username: this.username(),\n        onattach: (address: string, signature: string, source: string, type: string) => {\n          app.modal.close();\n\n          app\n            .request({\n              method: 'POST',\n              url: app.forum.attribute('baseUrl') + '/web3/register',\n              body: {\n                username: this.username(),\n                email: this.email(),\n                address,\n                signature,\n                type,\n                source,\n              },\n              errorHandler: this.onerror.bind(this),\n            })\n            .then(() => {\n              app.modal.close();\n              window.location.reload();\n            });\n        },\n      },\n      true\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport BaseLogInModal from 'flarum/forum/components/LogInModal';\nimport type ItemList from 'flarum/common/utils/ItemList';\nimport ConnectWalletModal from './ConnectWalletModal';\nimport Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\nimport SignUpModal from './SignUpModal';\n\nexport default class LogInModal extends BaseLogInModal {\n  title() {\n    return app.translator.trans('blomstra-web3.forum.log-in.with-wallet');\n  }\n\n  content() {\n    return [\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">{this.fields().toArray()}</div>\n      </div>,\n      <div className=\"Modal-footer\">{this.footer()}</div>,\n    ];\n  }\n\n  fields(): ItemList<unknown> {\n    const items = super.fields();\n\n    items.remove('password');\n\n    items.setContent(\n      'submit',\n      <Button className=\"Button Button--block Button--primary\" type=\"submit\" disabled={!this.identification()}>\n        {app.translator.trans('blomstra-web3.forum.log-in.select-wallet-account', {\n          rightArrow: icon('fas fa-arrow-right'),\n        })}\n      </Button>\n    );\n\n    return items;\n  }\n\n  footer() {\n    return [\n      <p className=\"LogInModal-forgotPassword\">\n        <a onclick={() => app.modal.show(BaseLogInModal)}>{app.translator.trans('blomstra-web3.forum.log-in.basic-login-link')}</a>\n      </p>,\n\n      app.forum.attribute('blomstra-web3.allow-sign-up') ? (\n        <p className=\"LogInModal-signUp\">\n          {app.translator.trans('core.forum.log_in.sign_up_text', { a: <a onclick={() => app.modal.show(SignUpModal)} /> })}\n        </p>\n      ) : (\n        ''\n      ),\n    ];\n  }\n\n  onsubmit(e: SubmitEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    app.modal.show(\n      ConnectWalletModal,\n      {\n        username: this.identification(),\n        onattach: (address: string, signature: string) => {\n          app.modal.close();\n\n          app\n            .request({\n              method: 'POST',\n              url: app.forum.attribute('baseUrl') + '/web3/login',\n              body: {\n                identification: this.identification(),\n                address,\n                signature,\n                remember: this.remember(),\n              },\n              errorHandler: this.onerror.bind(this),\n            })\n            .then(() => {\n              app.modal.close();\n              window.location.reload();\n            });\n        },\n      },\n      true\n    );\n  }\n}\n","import Web3Account from '../models/Web3Account';\nimport app from 'flarum/forum/app';\n\nexport default class Web3AccountsState {\n  private accounts: Web3Account[] | null = null;\n\n  loaded() {\n    return this.accounts !== null;\n  }\n\n  load() {\n    return (\n      this.accounts ??\n      app.store.find<Web3Account[]>('web3/accounts').then((accounts) => {\n        this.accounts = accounts;\n        m.redraw();\n      })\n    );\n  }\n\n  exists(address: string) {\n    return this.accounts !== null && this.accounts.some((account) => account.address() === address);\n  }\n\n  all(): Web3Account[] | null {\n    return this.accounts;\n  }\n\n  push(account: Web3Account) {\n    if (this.accounts !== null) {\n      this.accounts.push(account);\n    }\n  }\n\n  remove(address: string) {\n    if (this.accounts !== null) {\n      this.accounts.find((account) => account.address() === address)?.delete();\n      this.accounts = this.accounts.filter((account) => account.address() !== address);\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport extractText from 'flarum/common/utils/extractText';\nimport ConnectWalletModal from './ConnectWalletModal';\nimport Web3Account from '../models/Web3Account';\nimport type { IProviderInfo } from 'web3modal';\nimport type { WalletInfo } from '@subwallet/wallet-connect/types';\n\nexport default class AttachedWallets extends Component {\n  view() {\n    if (!app.web3.loaded) {\n      app.web3.load().then(() => m.redraw());\n\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <FieldSet className={`Settings-wallets`} label={app.translator.trans(`blomstra-web3.forum.settings.wallets_heading`)}>\n        {this.listAccountsView()}\n        <Button\n          icon=\"fas fa-wallet\"\n          className=\"Button\"\n          onclick={() =>\n            app.modal.show(ConnectWalletModal, {\n              username: app.session.user!.username(),\n            })\n          }\n        >\n          {app.translator.trans('blomstra-web3.forum.settings.wallet-connect-button')}\n        </Button>\n      </FieldSet>\n    );\n  }\n\n  listAccountsView() {\n    if (!app.web3accounts.loaded()) {\n      app.web3accounts.load();\n\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"AttachedWallets-list\">\n        {app.web3accounts.all()!.map((account) => {\n          return this.accountView(account);\n        })}\n      </div>\n    );\n  }\n\n  accountView(account: Web3Account) {\n    const isEth = account.type() === 'eth';\n\n    const { getProviderInfoByName, getWalletBySource, encodeAddress, hexToU8a } = app.web3.loadedModules();\n\n    const providerInfo = isEth ? getProviderInfoByName(account.source()) : getWalletBySource(account.source());\n\n    const logoSrc = isEth ? providerInfo?.logo : (providerInfo as WalletInfo)?.logo.src;\n    const walletName = isEth ? (providerInfo as IProviderInfo)?.name : (providerInfo as WalletInfo)?.title;\n    const address = isEth ? account.address() : encodeAddress(hexToU8a(account.address()));\n\n    return (\n      <div className=\"AttachedWallets-account\">\n        <div className=\"AttachedWallets-account-icon\">\n          <img src={logoSrc} alt=\"\" />\n        </div>\n        <div className=\"AttachedWallets-account-content\">\n          <div className=\"AttachedWallets-account-wallet\">{walletName}</div>\n          <div className=\"AttachedWallets-account-address\">{address}</div>\n        </div>\n        <div className=\"AttachedWallets-account-actions\">\n          <Tooltip text={app.translator.trans('blomstra-web3.forum.settings.unbind')}>\n            <Button className=\"Button Button--icon\" icon=\"fas fa-unlink\" onclick={() => this.unbind(account)} />\n          </Tooltip>\n        </div>\n      </div>\n    );\n  }\n\n  unbind(account: Web3Account) {\n    if (confirm(extractText(app.translator.trans('blomstra-web3.forum.settings.unbind_confirm')))) {\n      account.delete().then(() => {\n        app.web3accounts.remove(account.address());\n        m.redraw();\n      });\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderSecondary'];","import app from 'flarum/forum/app';\n\nexport default class Web3ModulesState {\n  public loaded = false;\n  private modules: any = {};\n\n  async load() {\n    if (this.loaded) return;\n\n    this.modules = await import(\n      `${app.forum.attribute('baseUrl')}/assets/extensions/blomstra-web3/web3.js` /* webpackIgnore: true, webpackPrefetch: true */\n    );\n\n    this.loaded = true;\n  }\n\n  async module<T>(name: string): Promise<T> {\n    await this.load();\n    return this.modules[name];\n  }\n\n  async all(): Promise<any> {\n    await this.load();\n    return this.modules;\n  }\n\n  loadedModules() {\n    return this.modules;\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport LogInButtons from 'flarum/forum/components/LogInButtons';\nimport BaseSignUpModal from 'flarum/forum/components/SignUpModal';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\n\nimport Web3Account from './models/Web3Account';\nimport LogInButton from './components/LogInButton';\nimport LogInModal from './components/LogInModal';\nimport SignUpModal from './components/SignUpModal';\nimport Web3AccountsState from './states/Web3AccountsState';\nimport AttachedWallets from './components/AttachedWallets';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport Button from 'flarum/common/components/Button';\nimport Web3ModulesState from './states/Web3ModulesState';\n\napp.initializers.add('blomstra/web3', () => {\n  app.store.models['web3-accounts'] = Web3Account;\n\n  app.web3 = new Web3ModulesState();\n  app.web3accounts = new Web3AccountsState();\n\n  // Session button to bind web3 accounts to current user account.\n  extend(SettingsPage.prototype, 'settingsItems', (items) => {\n    items.add('wallets', <AttachedWallets />, 95);\n  });\n\n  // Modify signup modal to add context to our login modal to be able to tell a login from a sigup.\n  extend(BaseSignUpModal.prototype, 'body', function (vnode) {\n    vnode[0] = !this.attrs.token && <LogInButtons isSignUp={true} />;\n  });\n\n  // Adds a \"Login with web3 account\" login option.\n  extend(LogInButtons.prototype, 'items', function (items) {\n    // @ts-ignore\n    const context = this.attrs.isSignUp ? 'sign-up' : 'log-in';\n\n    if (context === 'sign-up' && !app.forum.attribute<boolean>('blomstra-web3.allow-sign-up')) {\n      return;\n    }\n\n    items.add(\n      'web3',\n      <LogInButton\n        className=\"Button LogInButton--web3\"\n        icon=\"fas fa-wallet\"\n        // @ts-ignore\n        onclick={() => app.modal.show(this.attrs.isSignUp ? SignUpModal : LogInModal)}\n      >\n        {app.translator.trans(`blomstra-web3.forum.${context}.with-wallet`)}\n      </LogInButton>\n    );\n  });\n\n  // Open Web3 Auth Modals by default\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (app.session.user) return;\n\n    if (\n      (app.forum.attribute<boolean>('blomstra-web3.prioritize-web3-auth-modals') && app.forum.attribute<boolean>('blomstra-web3.allow-sign-up')) ||\n      (app.forum.attribute<boolean>('blomstra-web3.allow-sign-up') && !app.forum.attribute<boolean>('allowSignUp'))\n    ) {\n      if (items.has('signUp')) {\n        items.remove('signUp');\n      }\n\n      items.add(\n        'signUp',\n        <Button className=\"Button Button--link\" onclick={() => app.modal.show(SignUpModal)}>\n          {app.translator.trans('core.forum.header.sign_up_link')}\n        </Button>,\n        10\n      );\n    }\n\n    if (app.forum.attribute<boolean>('blomstra-web3.prioritize-web3-auth-modals') && items.has('logIn')) {\n      items.get('logIn').attrs.onclick = () => app.modal.show(LogInModal);\n    }\n  });\n});\n"],"names":["_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","prop","r","flarum","core","compat","_setPrototypeOf","p","bind","_inheritsLoose","subClass","superClass","Web3Account","address","Model","source","apiEndpoint","replace","LogInButton","initAttrs","attrs","className","BaseLogInButton","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","WalletAccounts","accounts","loading","view","wallet","getAccounts","accs","m","redraw","classList","icon","onclick","onback","app","title","map","account","accountIndex","accountView","u8aToHex","decodeAddress","isAttached","bindMessage","text","disconnectAccount","connectAccount","enable","signer","stringToHex","signRaw","data","username","signature","hexAddress","extensionName","save","errorHandler","onerror","meta","savedAccount","onattach","status","Component","PolkadotConnectWalletModal","selectedWallet","oninit","vnode","content","selectedWalletView","walletSelectionView","walletKindItems","toArray","items","ItemList","wallets","getDotsamaWallets","add","walletKindView","walletKind","index","walletIndex","walletView","Tag","installed","Button","Link","listWalletAccounts","href","installUrl","target","rel","logo","alt","listWallets","Modal","getProvider","INFURA_ID","Web3Modal","CoinbaseWalletSDK","WalletConnectProvider","providerOptions","walletconnect","package","options","infuraId","coinbasewallet","appName","binancechainwallet","opera","EvmConnectWalletModal","web3Modal","provider","__providerName","currentAddress","disconnect","request","params","getProviderInfo","unbind","close","clearCachedProvider","on","providerName","connect","ConnectWalletModal","SignUpModal","fields","footer","remove","setContent","disabled","email","rightArrow","BaseSignUpModal","LogInModal","onsubmit","e","preventDefault","stopPropagation","url","body","window","location","reload","identification","BaseLogInModal","remember","Web3AccountsState","loaded","load","exists","some","all","find","filter","AttachedWallets","label","listAccountsView","isEth","getProviderInfoByName","getWalletBySource","encodeAddress","hexToU8a","providerInfo","logoSrc","src","walletName","confirm","extractText","Web3ModulesState","modules","import","loadedModules","extend","SettingsPage","token","isSignUp","LogInButtons","HeaderSecondary","has"],"sourceRoot":""}